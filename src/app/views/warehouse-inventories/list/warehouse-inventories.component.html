<c-row>
  <c-col>
    <c-card class="mb-4">
      <c-card-header class="d-flex justify-content-between align-items-center">
        <div>
          <strong>Inventario</strong>
        </div>
        <button
          *hasRole="['tienda']"
          type="button"
          class="btn btn-primary btn-sm"
          (click)="downloadSku()"
        >
          <svg [cIcon]="icons.cilCloudDownload" size="sm"></svg>
          Descargar SKU
        </button>
      </c-card-header>
      <c-card-body>
        <!-- Filtros -->
        <form [formGroup]="filterForm" class="mb-4">
          <c-row>
            <c-col md="6">
              <label cLabel for="query">Buscar producto</label>
              <input
                cFormControl
                id="query"
                formControlName="query"
                type="text"
                class="form-control"
                placeholder="Nombre del producto o SKU"
                (input)="onFilterChange()"
              />
            </c-col>
            <c-col md="6" *ngIf="authService.hasRole('admin')">
              <label cLabel for="storeId">Filtrar por tienda</label>
              <ng-select
                [items]="[]"
                bindLabel="name"
                bindValue="id"
                formControlName="storeId"
                placeholder="Todas las tiendas"
                [clearable]="true"
                [searchable]="false"
                (change)="onFilterChange()"
              >
              </ng-select>
            </c-col>
          </c-row>
        </form>

        <app-loading-overlay *ngIf="isLoading"></app-loading-overlay>

        <app-inventory-table
          [products]="filteredProducts || []"
          [showActions]="false"
          [showStore]="authService.hasRole('admin')"
          [pagination]="pagination"
          [currentPage]="currentPage"
          (pageChange)="onPageChange($event)"
        >
        </app-inventory-table>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
