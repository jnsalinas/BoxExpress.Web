<form [formGroup]="form">
  <div class="row g-3">
    <!-- Información General -->
    <div class="col-md-8">
      <c-card>
        <c-card-header>Información General</c-card-header>
        <c-card-body>
          <div class="row g-3">
            <div class="col-md-5">
              <label class="form-label">Tienda</label>
              <ng-select
                [searchable]="false"
                [items]="storeOptions"
                bindLabel="name"
                bindValue="id"
                formControlName="storeId"
                placeholder="Seleccione..."
              >
              </ng-select>
            </div>
            <div class="col-md-7">
              <label class="form-label">Cliente</label>
              <input
                type="text"
                class="form-control"
                formControlName="clientFullName"
              />
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-4">
              <label class="form-label">Categoría</label>
              <ng-select
                [searchable]="false"
                [items]="cateogryOptions"
                bindLabel="name"
                bindValue="id"
                formControlName="categoryId"
                placeholder="Seleccione..."
              >
              </ng-select>
            </div>

            <div class="col-md-4">
              <label class="form-label">Bodega</label>
              <ng-select
                [searchable]="false"
                [items]="warehouseOptions"
                bindLabel="name"
                bindValue="id"
                formControlName="warehouseId"
                placeholder="Seleccione..."
              >
              </ng-select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Estado</label>
              <ng-select
                [searchable]="false"
                [items]="statusOptions"
                bindLabel="name"
                bindValue="id"
                formControlName="statusId"
                placeholder="Seleccione..."
              >
              </ng-select>
            </div>
          </div>
        </c-card-body>
      </c-card>

      <c-card class="mt-3">
        <c-card-header>Información de Entrega</c-card-header>
        <c-card-body>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Documento</label>
              <input
                type="text"
                class="form-control"
                formControlName="clientDocument"
              />
            </div>
            <div class="col-md-9">
              <label class="form-label">Dirección</label>
              <input
                type="text"
                class="form-control"
                formControlName="clientAddress"
              />
            </div>
          </div>

          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Teléfono</label>
              <input
                type="text"
                class="form-control"
                formControlName="clientPhone"
              />
            </div>
            <div class="col-md-3">
              <label class="form-label">Fecha Programada</label>
              <input
                type="date"
                class="form-control"
                formControlName="scheduledDate"
              />
            </div>
            <div class="col-md-4">
              <label class="form-label">Franja programada</label>
              <ng-select
                [searchable]="false"
                [items]="timeSlotOptions"
                bindLabel="label"
                bindValue="id"
                formControlName="timeSlotId"
                placeholder="Seleccione..."
              >
                <ng-template ng-label-tmp let-item="item">
                  {{ item.startTime }} - {{ item.endTime }}
                </ng-template>
                <ng-template ng-option-tmp let-item="item">
                  {{ item.startTime }} - {{ item.endTime }}
                </ng-template>
              </ng-select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Fecha de Entrega</label>
              <input
                type="date"
                class="form-control"
                formControlName="deliveryDate"
              />
            </div>
            <div class="col-md-3">
              <label class="form-label">Fecha Reprogramada</label>
              <input
                type="date"
                class="form-control"
                formControlName="rescheduleDate"
              />
            </div>
          </div>
        </c-card-body>
      </c-card>

      <!-- Información Económica -->
      <c-card class="mt-3">
        <c-card-header>Costos</c-card-header>
        <c-card-body>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Total</label>
              <input
                type="text"
                class="form-control"
                formControlName="totalAmount"
              />
            </div>
            <div class="col-md-3">
              <label class="form-label">Envío</label>
              <input
                type="text"
                class="form-control"
                formControlName="deliveryFee"
              />
            </div>
            <div class="col-md-3">
              <label class="form-label">Moneda</label>
              <input
                type="text"
                class="form-control"
                formControlName="currencyCode"
              />
            </div>
          </div>
        </c-card-body>
      </c-card>

      <!-- Notas -->
      <c-card class="mt-3">
        <c-card-header>Notas</c-card-header>
        <c-card-body>
          <div class="row g-3">
            <div class="col-12">
              <!-- <label class="form-label">Notas</label> -->
              <textarea
                class="form-control"
                rows="3"
                formControlName="notes"
              ></textarea>
            </div>
          </div>
        </c-card-body>
      </c-card>
    </div>

    <div class="col-md-4 d-flex flex-column" style="height: 100%">
      <app-order-status-history
        [orderId]="order.id"
        style="flex-grow: 1; overflow-auto"
      ></app-order-status-history>
    </div>
  </div>
</form>
