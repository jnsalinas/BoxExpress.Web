<c-row>
  <c-col xs="12" sm="12" lg="12">
    <c-card class="h-100 products-card">
      <c-card-header class="bg-light">
        <h5 class="mb-0">
          <i class="fas fa-box me-2 text-primary"></i>
          Productos de la Orden
        </h5>
      </c-card-header>
      <c-card-body class="p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th class="border-0">
                  <i class="fas fa-tag me-2 text-muted"></i>
                  Producto
                </th>
                <th class="border-0">
                  <i class="fas fa-cube me-2 text-muted"></i>
                  Variante
                </th>
                <th class="border-0 text-center">
                  <i class="fas fa-hashtag me-2 text-muted"></i>
                  Cantidad
                </th>
                <th class="border-0 text-end">
                  <i class="fas fa-dollar-sign me-2 text-muted"></i>
                  Precio Unitario
                </th>
                <th class="border-0 text-end">
                  <i class="fas fa-calculator me-2 text-muted"></i>
                  Subtotal
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of products; let i = index" class="product-row">
                <td class="align-middle">
                  <div class="d-flex align-items-center">
                    <div class="product-icon me-3">
                      <i class="fas fa-box text-primary"></i>
                    </div>
                                         <div>
                       <div class="fw-semibold">{{ item.productName }}</div>
                       <small class="text-muted">ID: {{ item.id }}</small>
                     </div>
                  </div>
                </td>
                <td class="align-middle">
                  <span class="badge bg-light text-dark">{{ item.productVariantName || 'Sin variante' }}</span>
                </td>
                <td class="align-middle text-center">
                  <span class="badge bg-primary fs-6">{{ item.quantity }}</span>
                </td>
                <td class="align-middle text-end">
                  <span class="fw-semibold text-success">{{ item.unitPrice | currency }}</span>
                </td>
                                 <td class="align-middle text-end">
                   <span class="fw-bold text-primary">{{ ((item.unitPrice || 0) * (item.quantity || 0)) | currency }}</span>
                 </td>
              </tr>
              <tr *ngIf="products.length === 0" class="text-center">
                <td colspan="5" class="py-4">
                  <div class="text-muted">
                    <i class="fas fa-inbox fa-2x mb-3"></i>
                    <p class="mb-0">No hay productos en esta orden</p>
                  </div>
                </td>
              </tr>
            </tbody>
            <tfoot *ngIf="products.length > 0" class="table-light">
              <tr>
                <td colspan="4" class="text-end fw-bold">Total Productos:</td>
                <td class="text-end fw-bold text-primary fs-5">
                  {{ getTotalProducts() | currency }}
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
