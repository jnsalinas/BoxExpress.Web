<c-modal
  [visible]="warehouseInventoryItem && warehouseInventoryForm"
  size="lg"
  backdrop="static"
  keyboard="false"
>
  <c-modal-header>
    <h5 class="modal-title">
      <svg [cIcon]="icons.cilPencil" class="me-2"></svg>
      Editar Variante de Inventario
    </h5>
  </c-modal-header>

  <c-modal-body>
    <div *ngIf="!warehouseInventoryItem" class="text-center py-4">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-2 text-muted">Cargando datos de la variante...</p>
    </div>

    <form [formGroup]="warehouseInventoryForm" *ngIf="warehouseInventoryItem">
      <c-row>
        <c-col col="12">
          <div class="form-group mb-3">
            <label for="variantName" class="form-label">Nombre de la Variante</label>
            <input
              type="text"
              id="variantName"
              class="form-control"
              formControlName="variantName"
              placeholder="Nombre de la variante"
            />
          </div>
        </c-col>
      </c-row>
      <c-row>
        <c-col col="12">
          <div class="form-group mb-3">
            <label for="variantSku" class="form-label">SKU de la Variante</label>
            <input
              type="text"
              id="variantSku"
              class="form-control"
              formControlName="variantSku"
              placeholder="SKU de la variante"
            />
          </div>
        </c-col>
      </c-row>
      <c-row>
        <c-col col="6">
          <div class="form-group mb-3">
            <label for="price" class="form-label">Precio</label>
            <div class="input-group">
              <span class="input-group-text">$</span>
              <input
                type="number"
                id="price"
                class="form-control"
                formControlName="price"
                placeholder="0.00"
                min="0"
                step="0.01"
              />
            </div>
          </div>
        </c-col>
        <c-col col="6">
          <div class="form-group mb-3">
            <label for="quantity" class="form-label">Cantidad</label>
            <input
              type="number"
              id="quantity"
              class="form-control"
              formControlName="quantity"
              placeholder="0"
              min="0"
            />
          </div>
        </c-col>
      </c-row>
      <c-row>
        <c-col col="6">
          <div class="form-group mb-3">
            <label for="storeId" class="form-label">Tienda</label>
            <ng-select
              id="storeId"
              [items]="stores"
              [clearable]="false"
              bindLabel="name"
              bindValue="id"
              placeholder="Selecciona una tienda..."
              formControlName="storeId"
            ></ng-select>
          </div>
        </c-col>
        <c-col col="6">
          <div class="form-group mb-3">
            <label for="shopifyVariantId" class="form-label">Shopify Variant ID</label>
            <input
              type="text"
              id="shopifyVariantId"
              class="form-control"
              formControlName="shopifyVariantId"
              placeholder="ID de la variante en Shopify"
            />
          </div>
        </c-col>
      </c-row>
    </form>
  </c-modal-body>

  <c-modal-footer>
    <button type="button" class="btn btn-secondary" (click)="close()">
      <svg [cIcon]="icons.cilX" class="me-1"></svg>
      Cancelar
    </button>
    <button
      type="button"
      class="btn btn-primary"
      (click)="save()"
      [disabled]="!warehouseInventoryForm.valid || isSaving"
    >
      <svg [cIcon]="icons.cilCheck" class="me-1"></svg>
      {{ isSaving ? 'Guardando...' : 'Guardar Cambios' }}
    </button>
  </c-modal-footer>
</c-modal>
